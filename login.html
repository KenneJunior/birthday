<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Form Login</title>
    <meta name="description" content="Secure authentication for birthday form access">
    <link rel="stylesheet" href="src/css/login.css">
    <script src="https://cdn.auth0.com/js/auth0-spa-js/1.22/auth0-spa-js.production.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth0-wrapper" id="auth0">
            <div id="auth0Container">
                <div class="auth-header">
                    <div class="logo">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 10a6 6 0 10-12 0 6 6 0 0012 0zM6 10a4 4 0 118 0 4 4 0 01-8 0z"/>
                            <path d="M12 12a2 2 0 100-4 2 2 0 000 4z"/>
                            <path d="M20 10a8 8 0 10-16 0 8 8 0 0016 0zM4 10a6 6 0 1112 0 6 6 0 01-12 0z"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2a8 8 0 00-8 8c0 1.848.627 3.551 1.674 4.906l-1.62 1.62a1 1 0 00 0 1.414l1.414 1.414a1 1 0 001.414 0l1.62-1.62A7.96 7.96 0 0012 18a7.96 7.96 0 004.906-1.674l1.62 1.62a1 1 0 001.414 0l1.414-1.414a1 1 0 000-1.414l-1.62-1.62A7.96 7.96 0 0020 10a8 8 0 00-8-8zm-6 8a6 6 0 1112 0 6 6 0 01-12 0z"/>
                        </svg>
                        <span>SecureAccess</span>
                    </div>
                    <h1>Welcom Back</h1>
                    <p>Choose your preferred login method</p>
                </div>

            <div class="auth-options">
                <div class="auth-option-card">   
                    <h3>Secure Login with Auth0</h3>
                    <p>Recommended for the best security experience</p>
                    <button id="loginBtn" class="btn btn-primary auth-btn" onclick="loginWithAuth0()">
                        <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <span>Login with Auth0</span>
                    </button>
                </div>

                <div class="auth-divider">
                    <span>OR</span>
                </div>

                <div class="auth-option-card">
                        <h3>Password Login</h3>
                        <p>Use the password provided to you</p>
                        <button class="btn btn-secondary auth-btn" onclick="showPasswordLogin()">
                            <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                            </svg>
                            <span>Use Password</span>
                        </button>
                </div>
            </div>

            <div id="userInfo" class="user-info d-none">
                <div class="user-card">
                    <h3>Welcome, <span id="userName">User</span>!</h3>
                    <p>You are successfully authenticated</p>
                    <button id="logoutBtn" class="btn btn-secondary" onclick="logoutWithAuth0()">
                        <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                        </svg>
                        <span>Logout</span>
                    </button>
                </div>
            </div>
            
        </div>
    </div>


        <div id="passwordContainer" class="login-container">
            <div class="login-card">
                <header class="login-header">
                    <div class="logo">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 10a6 6 0 10-12 0 6 6 0 0012 0zM6 10a4 4 0 118 0 4 4 0 01-8 0z"/>
                            <path d="M12 12a2 2 0 100-4 2 2 0 000 4z"/>
                            <path d="M20 10a8 8 0 10-16 0 8 8 0 0016 0zM4 10a6 6 0 1112 0 6 6 0 01-12 0z"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2a8 8 0 00-8 8c0 1.848.627 3.551 1.674 4.906l-1.62 1.62a1 1 0 00 0 1.414l1.414 1.414a1 1 0 001.414 0l1.62-1.62A7.96 7.96 0 0012 18a7.96 7.96 0 004.906-1.674l1.62 1.62a1 1 0 001.414 0l1.414-1.414a1 1 0 000-1.414l-1.62-1.62A7.96 7.96 0 0020 10a8 8 0 00-8-8zm-6 8a6 6 0 1112 0 6 6 0 01-12 0z"/>
                        </svg>
                        <span>SecureAccess</span>
                    </div>
                    <h1>Welcome Back Junior</h1>
                    <button class="back-btn" onclick="showAuthOptions()">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                        Back to login options
                    </button>
                </header>

                <main class="login-content">
                    <form id="loginForm" class="login-form" novalidate>
                        <div class="input-group">
                            <input type="Username"  name="username" class="d-none" value="God's fhavur" placeholder="Username" autocomplete="username" aria-label="Username">
                            <label for="password" class="sr-only">Password</label>
                            <div class="password-wrapper">
                                <input 
                                    type="password" 
                                    id="password" 
                                    name="password" 
                                    required 
                                    autocomplete="current-password"
                                    minlength="8"
                                    placeholder="Enter your password"
                                    aria-describedby="password-requirements"
                                >
                                <button type="button" id="togglePassword" class="password-toggle" aria-label="Show password">
                                    <svg class="eye-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                </button>
                            </div>
                            <p id="password-requirements" class="input-help">Must be at least 8 characters</p>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <span class="btn-text">Continue</span>
                                <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 12h14M12 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>
                    </form>

                    <div class="login-info">
                        <div class="info-notice" role="status">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                            </svg>
                            <p>This is an application that is used to secure this site.</p>
                        </div>
                    </div>
                </main>

                <footer class="login-footer">
                    <p>Need help? <a href="https://api.whatsapp.com/send?phone=670852835&text=Please help with " id="contactSupport" aria-label="Contact support">Contact support</a></p>
                    <p class="security-note">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                        </svg>
                        Your data remains on your device
                    </p>
                </footer>
            </div>

            <div class="notification" id="notification" aria-live="polite">
                <span class="notification-text" id="notificationText"></span>
                <i class="fas fa-times"></i>
            </div>
        </div>
    </div>

    <script src="src/js/login.js" type="module"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1.3/auth0-spa-js.production.js"></script>
    <script>
        // Global functions for UI navigation
        function showPasswordLogin() {
            document.getElementById('auth0').classList.add('d-none');
            document.getElementById('passwordContainer').classList.remove('d-none');
        }

        function showAuthOptions() {
            document.getElementById('passwordContainer').classList.add('d-none');
            document.getElementById('auth0').classList.remove('d-none');
        }

        function loginWithAuth0() {
            if (typeof Auth0Manager !== 'undefined') {
                Auth0Manager.login();
            }
        }

        function logoutWithAuth0() {
            if (typeof Auth0Manager !== 'undefined') {
                Auth0Manager.logout();
            }
        }
    </script>
</body>
</html>
